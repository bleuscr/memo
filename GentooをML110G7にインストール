curl https://raw.github.com/bleuscr/memo/master/Gentoo%E3%82%92ML110G7%E3%81%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB -o .bash_history 
date
hwclock
mkfs.ext2 /dev/sda1
mkfs.ext4 -j /dev/sda2
mkfs.btrfs /dev/sda3
rm -r /mnt/gentoo/ /mnt/home/
mkdir /mnt/gentoo
mount -t ext4 /dev/sda2 /mnt/gentoo/
mkdir /mnt/gentoo/boot
mount -t ext2 /dev/sda1 /mnt/gentoo/boot
mkdir -p /mnt/home
mount -t btrfs /dev/sda3 /mnt/home
cd /mnt/gentoo/
wget http://gentoo.channelx.biz/releases/amd64/current-stage3/stage3-amd64-20130530.tar.bz2
tar xvjpf stage3-*.tar.bz2
wget http://gentoo.channelx.biz/snapshots/portage-latest.tar.bz2
tar xvjf portage-latest.tar.bz2 -C /mnt/gentoo/usr
rm stage3-*.tar.bz2* portage-latest.tar.bz2*
nano -w /mnt/gentoo/etc/portage/make.conf
mount -t proc none /mnt/gentoo/proc
mount --rbind /dev /mnt/gentoo/dev
mount --rbind /sys /mnt/gentoo/sys
cp -L /etc/resolv.conf /mnt/gentoo/etc
chroot /mnt/gentoo /bin/bash
env-update && source /etc/profile
export PS1=" $PS1"
time emerge --sync
eselect profile list
eselect profile set 1
eselect profile list
emerge distcc
time emerge distcc livecd-tools linux-headers linux-firmware gentoo-sources iptables pciutils syslog-ng fcron dhcpcd openssh vim mdadm lvm2 cryptsetup sudo zsh grub eix portage-utils samba man-pages-ja groff ntp ufw --autounmask-write
dispatch-conf
time emerge -tav distcc livecd-tools linux-headers linux-firmware gentoo-sources iptables pciutils syslog-ng fcron dhcpcd openssh vim mdadm lvm2 cryptsetup sudo zsh grub eix portage-utils samba man-pages-ja groff ntp ufw
netstat -rn
net-setup enp2s0
ifconfig
nano -w /etc/locale.gen
nano /etc/env.d/02locale
locale-gen
cp /usr/share/zoneinfo/Japan /etc/localtime
echo "Asia/Tokyo" > /etc/timezone
cat /etc/timezone
date
ls -l /usr/src/linux
cd /usr/src/linux
make localyesconfig
make menuconfig
time make && make
cp arch/x86_64/boot/bzImage /boot/kernel
ls /boot/kernel* /boot/initramfs*
nano /etc/fstab
nano -w /etc/conf.d/hostname
ln -s /etc/init.d/net.lo /etc/init.d/net.enp2s0
rc-update add net.enp2s0 default
ufw enable
ufw allow ssh
ufw allow http
nano -w /etc/ssh/sshd_config
rc-update add sshd default
rc-update add dhcpcd default
rc-update add syslog-ng default
rc-update add fcron default
nano -w /etc/rc.conf
nano -w /etc/conf.d/keymaps
nano -w /etc/conf.d/hwclock
hwclock --debug
ntpdate ntp.nict.jp
hwclock --systohc
passwd
visudo
env-update && source /etc/profile
ls /boot/kernel* /boot/initramfs*
nano /boot/grub/grub.conf
exit
umount -l /mnt/gentoo{/dev{/shm,/pts},/sys,/usr,/home,/opt,/tmp,/var,/boot,/proc,/}
exit
poweroff
useradd -m -g users -G wheel -s /bin/zsh bsod
passwd bsod
